import{d as U,r as v,o as O,h as q,a as d,c as b,w as a,b as e,V as B,e as t,t as g,f as F,g as h,i as T,j as S,k as V,F as x,l as k,m as D,n as N,p as I,q as $,s as z,u as M,v as P,x as G,_ as H}from"./index-Cc2wFGp6.js";import{V as J,a as K,b as Q,c as R}from"./VWindowItem-C0ylblcY.js";import{V as X}from"./VTable-DFDSBb63.js";import{V as Y}from"./VDialog-m9a34H3S.js";const Z={class:"d-flex flex-row text-primary mb-2"},ee={class:"my-auto"},te={class:"d-flex flex-row text-primary my-4"},oe=t("h4",{class:"my-auto"},"Learning outcome distribution",-1),ae=t("thead",null,[t("tr",null,[t("th",null,"Outcome"),t("th",null,"Threshold"),t("th",{class:"w-50"},"Description")])],-1),le={class:"w-50"},se=U({__name:"CourseDetail",props:{course_name:String,course_code:String,department:String},emits:["openDialog"],setup(w,{emit:_}){const f=w,r=_,u=v(""),m=v({}),i=v(),n=v();O(()=>{E()});function C(c,l,s){return s.indexOf(c)===l}async function E(){await q.get(`/api/courses/${f.course_code}/outcomes`).then(function(c){var s,p;const{data:l}=c;n.value=l.map(o=>({pk:o.pk,outcome_code:o.outcome_code,outcome_description:o.outcome_description,threshold:o.threshold,parent_outcome:o.parent_outcome,outcome_name:o.outcome_name})),i.value=(s=n.value)==null?void 0:s.map(o=>o.parent_outcome).filter(C).sort(j),m.value=L(),u.value=((p=i.value)==null?void 0:p.at(0))??""})}function j(c,l){return(""+c).localeCompare(l)}function A(c,l){return(""+c.outcome).localeCompare(l.outcome)}function L(){const c={};return i.value&&n.value&&i.value.forEach(l=>{var p;const s=((p=n.value)==null?void 0:p.filter(o=>o.parent_outcome==l))??[];c[l]=s.map(o=>({outcome:o.outcome_code,description:o.outcome_description,threshold:o.threshold})).sort(A)}),c}return(c,l)=>(d(),b(z,{class:"w-66 mx-auto text-secondary"},{default:a(()=>[e(B,null,{default:a(()=>[t("div",Z,[t("h2",ee,g(f.course_name),1),e(F,{size:"md",class:"ml-2 my-auto"},{default:a(()=>[h("fas fa-chevron-right")]),_:1}),e(T,{class:"ml-4 my-auto"},{default:a(()=>[h(g(f.course_code),1)]),_:1}),e(F,{size:"md",class:"ml-2 my-auto"},{default:a(()=>[h("fas fa-chevron-right")]),_:1}),e(T,{class:"ml-4 my-auto"},{default:a(()=>[h(g(f.department),1)]),_:1})]),e(S),t("div",null,[t("div",te,[e(F,{class:"my-auto mr-2 text-sub",size:"small"},{default:a(()=>[h("fas fa-check-circle")]),_:1}),oe]),e(J,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=s)},{default:a(()=>[(d(!0),V(x,null,k(i.value,(s,p)=>(d(),b(K,{key:p,value:s},{default:a(()=>[h(g(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(Q,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value=s),class:"mt-2"},{default:a(()=>[(d(!0),V(x,null,k(i.value,(s,p)=>(d(),b(R,{key:p,value:s},{default:a(()=>[e(X,null,{default:a(()=>[ae,t("tbody",null,[(d(!0),V(x,null,k(m.value[s],(o,W)=>(d(),V("tr",{key:W},[t("td",null,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Outcome (e.g, L.O.1.1)",class:"mt-2",density:"compact",modelValue:o.outcome,"onUpdate:modelValue":y=>o.outcome=y},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Threshold",class:"mt-2",density:"compact",modelValue:o.threshold,"onUpdate:modelValue":y=>o.threshold=y},null,8,["modelValue","onUpdate:modelValue"])]),t("td",le,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Description",class:"mt-2",density:"compact",modelValue:o.description,"onUpdate:modelValue":y=>o.description=y},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),e(S,{class:"my-1"}),e(N,null,{default:a(()=>[e(I),e($,{text:"Close",class:"text-none bg-blue-lighten-5 text-blue-darken-2",onClick:l[2]||(l[2]=s=>r("openDialog",!1))}),e($,{class:"text-none bg-primary",text:"Save",onClick:l[3]||(l[3]=s=>r("openDialog",!1))})]),_:1})]),_:1}))}}),ne={class:"text-secondary w-100"},re={class:"w-75 my-2 d-flex flex-column align-start"},ue={class:"text-caption mb-auto font-weight-bold text-grey-darken-1"},ce={class:"text-h6"},de={class:"mr-2"},ie=U({__name:"CourseItem",props:{id:{type:Number,required:!0},course_code:{type:String,required:!0},course_name:{type:String,required:!0},department:{type:String,required:!0}},setup(w){const _=v(!1),f=M(()=>{switch(r.id%4){case 0:return"bg-blue-lighten-5";case 1:return"bg-orange-lighten-5";case 2:return"bg-green-lighten-5";case 3:return"bg-red-lighten-5"}}),r=w;return(u,m)=>{const i=se;return d(),b(z,{color:`grey-lighten-3 ${f.value}`,variant:"outlined",class:"w-33"},{default:a(()=>[e(B,null,{default:a(()=>[t("div",ne,[t("div",re,[t("div",ue,"["+g(r.department)+"] "+g(r.course_code),1),t("div",ce,g(r.course_name),1)])])]),_:1}),e(S),e(N,null,{default:a(()=>[e(I),t("div",de,[e(Y,{modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=n=>_.value=n)},{activator:a(({props:n})=>[e($,P({variant:"outlined",width:"75",class:"text-none text-primary"},n),{default:a(()=>[h(" Edit ")]),_:2},1040)]),default:a(()=>[e(i,{onOpenDialog:m[0]||(m[0]=n=>_.value=n),course_code:r.course_code,course_name:r.course_name,department:r.department},null,8,["course_code","course_name","department"])]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["color"])}}}),me={class:"d-flex flex-row w-100 justify-space-between"},pe=t("h1",{class:"text-primary"},"All courses",-1),_e={class:"mt-10",style:{display:"grid","grid-template-columns":"375px 375px auto",gap:"20px"}},Ve=U({__name:"Course",setup(w){const _=v();async function f(){const{data:r}=await q.get("/api/courses");_.value=r.map(u=>({course_code:u.course_code,course_name:u.course_name,department:u.department}))}return O(()=>{f()}),(r,u)=>{const m=H,i=ie;return d(),V(x,null,[e(m),e(G,null,{default:a(()=>[t("div",me,[pe,t("div",null,[e($,{to:"/course/create",variant:"flat",height:"40",class:"text-none bg-primary text-white","prepend-icon":"fas fa-plus"},{default:a(()=>[h("New course")]),_:1})])]),t("div",_e,[(d(!0),V(x,null,k(_.value,(n,C)=>(d(),b(i,{class:"mr-4 w-100",key:C,id:C,course_code:n.course_code,course_name:n.course_name,department:n.department},null,8,["id","course_code","course_name","department"]))),128))])]),_:1})],64)}}});export{Ve as default};
