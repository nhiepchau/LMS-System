import{d as U,r as g,o as O,h as q,a as d,c as x,w as a,b as e,V as B,e as t,t as f,f as F,g as _,i as T,j as S,k as V,F as b,l as C,m as D,n as I,p as N,q as k,s as z,u as M,v as P,x as G,_ as H}from"./index-MoPcLG9q.js";import{V as J,a as K,b as Q,c as R}from"./VWindowItem-BkqGcVEj.js";import{V as X}from"./VTable-DrOtf772.js";const Y={class:"d-flex flex-row text-primary mb-2"},Z={class:"my-auto"},ee={class:"d-flex flex-row text-primary my-4"},te=t("h4",{class:"my-auto"},"Learning outcome distribution",-1),oe=t("thead",null,[t("tr",null,[t("th",null,"Outcome"),t("th",null,"Threshold"),t("th",{class:"w-50"},"Description")])],-1),ae={class:"w-50"},le=U({__name:"CourseDetail",props:{course_name:String,course_code:String,department:String},emits:["openDialog"],setup(w,{emit:i}){const r=w,h=i,n=g(""),v=g({}),u=g(),p=g();O(()=>{E()});function $(c,l,s){return s.indexOf(c)===l}async function E(){await q.get(`/api/courses/${r.course_code}/outcomes`).then(function(c){var s,m;const{data:l}=c;p.value=l.map(o=>({pk:o.pk,outcome_code:o.outcome_code,outcome_description:o.outcome_description,threshold:o.threshold,parent_outcome:o.parent_outcome,outcome_name:o.outcome_name})),u.value=(s=p.value)==null?void 0:s.map(o=>o.parent_outcome).filter($).sort(j),v.value=L(),n.value=((m=u.value)==null?void 0:m.at(0))??""})}function j(c,l){return(""+c).localeCompare(l)}function A(c,l){return(""+c.outcome).localeCompare(l.outcome)}function L(){const c={};return u.value&&p.value&&u.value.forEach(l=>{var m;const s=((m=p.value)==null?void 0:m.filter(o=>o.parent_outcome==l))??[];c[l]=s.map(o=>({outcome:o.outcome_code,description:o.outcome_description,threshold:o.threshold})).sort(A)}),c}return(c,l)=>(d(),x(z,{class:"w-66 mx-auto text-secondary"},{default:a(()=>[e(B,null,{default:a(()=>[t("div",Y,[t("h2",Z,f(r.course_name),1),e(F,{size:"md",class:"ml-2 my-auto"},{default:a(()=>[_("fas fa-chevron-right")]),_:1}),e(T,{class:"ml-4 my-auto"},{default:a(()=>[_(f(r.course_code),1)]),_:1}),e(F,{size:"md",class:"ml-2 my-auto"},{default:a(()=>[_("fas fa-chevron-right")]),_:1}),e(T,{class:"ml-4 my-auto"},{default:a(()=>[_(f(r.department),1)]),_:1})]),e(S),t("div",null,[t("div",ee,[e(F,{class:"my-auto mr-2 text-sub",size:"small"},{default:a(()=>[_("fas fa-check-circle")]),_:1}),te]),e(J,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value=s)},{default:a(()=>[(d(!0),V(b,null,C(u.value,(s,m)=>(d(),x(K,{key:m,value:s},{default:a(()=>[_(f(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(Q,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value=s),class:"mt-2"},{default:a(()=>[(d(!0),V(b,null,C(u.value,(s,m)=>(d(),x(R,{key:m,value:s},{default:a(()=>[e(X,null,{default:a(()=>[oe,t("tbody",null,[(d(!0),V(b,null,C(v.value[s],(o,W)=>(d(),V("tr",{key:W},[t("td",null,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Outcome (e.g, L.O.1.1)",class:"mt-2",density:"compact",modelValue:o.outcome,"onUpdate:modelValue":y=>o.outcome=y},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Threshold",class:"mt-2",density:"compact",modelValue:o.threshold,"onUpdate:modelValue":y=>o.threshold=y},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ae,[e(D,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Description",class:"mt-2",density:"compact",modelValue:o.description,"onUpdate:modelValue":y=>o.description=y},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),e(S,{class:"my-1"}),e(I,null,{default:a(()=>[e(N),e(k,{text:"Close",class:"text-none bg-blue-lighten-5 text-blue-darken-2",onClick:l[2]||(l[2]=s=>h("openDialog",!1))}),e(k,{class:"text-none bg-primary",text:"Save",onClick:l[3]||(l[3]=s=>h("openDialog",!1))})]),_:1})]),_:1}))}}),se={class:"text-secondary w-100"},ne={class:"w-75 my-2 d-flex flex-column align-start"},ue={class:"text-caption mb-auto font-weight-bold text-grey-darken-1"},re={class:"text-h6"},ce={class:"mr-2"},de=U({__name:"CourseItem",props:{course_code:{type:String,required:!0},course_name:{type:String,required:!0},department:{type:String,required:!0}},setup(w){const i=g(!1),r=w;return(h,n)=>{const v=le;return d(),x(z,{color:"grey-lighten-3 bg-blue-lighten-5",variant:"outlined",class:"w-33"},{default:a(()=>[e(B,null,{default:a(()=>[t("div",se,[t("div",ne,[t("div",ue,"["+f(r.department)+"] "+f(r.course_code),1),t("div",re,f(r.course_name),1)])])]),_:1}),e(S),e(I,null,{default:a(()=>[e(N),t("div",ce,[e(M,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=u=>i.value=u)},{activator:a(({props:u})=>[e(k,P({variant:"outlined",width:"75",class:"text-none text-primary"},u),{default:a(()=>[_(" Edit ")]),_:2},1040)]),default:a(()=>[e(v,{onOpenDialog:n[0]||(n[0]=u=>i.value=u),course_code:r.course_code,course_name:r.course_name,department:r.department},null,8,["course_code","course_name","department"])]),_:1},8,["modelValue"])])]),_:1})]),_:1})}}}),me={class:"d-flex flex-row w-100 justify-space-between"},ie=t("h1",{class:"text-primary"},"All courses",-1),pe={class:"mt-10",style:{display:"grid","grid-template-columns":"375px 375px auto",gap:"20px"}},ve=U({__name:"Course",setup(w){const i=g();async function r(){const{data:h}=await q.get("/api/courses");i.value=h.map(n=>({course_code:n.course_code,course_name:n.course_name,department:n.department}))}return O(()=>{r()}),(h,n)=>{const v=H,u=de;return d(),V(b,null,[e(v),e(G,null,{default:a(()=>[t("div",me,[ie,t("div",null,[e(k,{to:"/course/create",variant:"flat",height:"40",class:"text-none bg-primary text-white","prepend-icon":"fas fa-plus"},{default:a(()=>[_("New course")]),_:1})])]),t("div",pe,[(d(!0),V(b,null,C(i.value,(p,$)=>(d(),x(u,{class:"mr-4 w-100",key:$,course_code:p.course_code,course_name:p.course_name,department:p.department},null,8,["course_code","course_name","department"]))),128))])]),_:1})],64)}}});export{ve as default};
