import{M as A,b5 as R,a3 as L,b6 as j,b7 as M,b8 as O,b9 as G,a9 as H,a5 as J,ay as Q,O as K,az as W,aa as X,ab as Y,ba as Z,bb as ee,bc as ae,bd as se,be as te,ad as oe,P as le,b as e,_ as ne,a as h,f as D,w as s,E as ie,A as x,k as i,d as E,b4 as F,J as re,r as k,ai as ce,m as ue,i as V,g as p,l as z,q as $,c as w,L as de,y as me,z as pe,B as fe,o as _e,t as P,u as I,G as S,s as ve,F as be,H as ge}from"./index-C1svi_0i.js";import{V as ye}from"./VForm-DKcqtbdI.js";import{_ as ke}from"./FileInput.vue_vue_type_script_setup_true_lang-BgTwTLOk.js";import{a as xe,h as q}from"./http-nrUfQssp.js";import{u as he,q as Ce}from"./course-BudutSGk.js";import{V as B}from"./VDialog-Cono6XTE.js";const Ve=A({color:String,...R(),...L(),...j(),...M(),...O(),...G(),...H(),...J(),...Q()},"VSheet"),we=K()({name:"VSheet",props:Ve(),setup(t,f){let{slots:r}=f;const{themeClasses:_}=W(t),{backgroundColorClasses:v,backgroundColorStyles:u}=X(Y(t,"color")),{borderClasses:d}=Z(t),{dimensionStyles:n}=ee(t),{elevationClasses:b}=ae(t),{locationStyles:g}=se(t),{positionClasses:y}=te(t),{roundedClasses:c}=oe(t);return le(()=>e(t.tag,{class:["v-sheet",_.value,v.value,d.value,b.value,y.value,c.value,t.class],style:[u.value,n.value,g.value,t.style]},r)),{}}}),$e={},Pe=i("h3",{class:"text-primary mb-5 text-left"},"Add new question?",-1);function Ie(t,f){return h(),D(we,{class:"mx-auto w-50 pa-5 text-right"},{default:s(()=>[Pe,e(ye,{"validate-on":"submit lazy"},{default:s(()=>[e(ie,{label:"Question"}),e(x,{class:"mt-2 text-none bg-light-blue",text:"Submit",type:"submit",variant:"elevated"})]),_:1})]),_:1})}const Se=ne($e,[["render",Ie]]),qe={class:"d-flex flex-row text-primary mb-2"},Be=i("h2",{class:"my-auto"},"Import new file",-1),De=i("p",{class:"mt-4"},"Please import more question data for the student ",-1),Ee={class:"border-sm rounded pa-4 my-4 mx-auto",style:{height:"250px"}},Fe={class:"d-flex flex-row text-primary"},ze=i("h3",null,"Exercise file",-1),Te={key:0,class:"mt-15"},Ne={key:1,class:"text-center mt-10"},Ue=E({__name:"ImportCard",props:{classId:{type:Number,required:!0}},emits:["openImportCard"],setup(t,{emit:f}){const r=f,_=t,v=F(),u=re(),d=k(),n=k(!1),b=ce("create-notification"),g="http://127.0.0.1:8000";async function y(){if(d.value){const c=new FormData;c.append("exercise_file",d.value),c.append("class_code",`${_.classId}`),console.log("FormData ",c),n.value=!0,await xe.post(`${g}/api/classes/${v.params.class_code}/exercises/upload`,c,{headers:{Authorization:`Bearer ${u.token}`,"Content-Type":"multipart/form-data"}}).then(function(m){var o;n.value=!1,r("openImportCard",!1),b({type:"success",message:`Uploaded file ${(o=d.value)==null?void 0:o.name} successfully!`})}).catch(function(){n.value=!1,r("openImportCard",!1),b({type:"error",message:"Something's wrong when uploading!"})})}}return(c,m)=>{const o=ke;return h(),D(fe,{class:"w-66 mx-auto text-secondary"},{default:s(()=>[e(ue,null,{default:s(()=>[i("div",qe,[Be,e(V,{size:"md",class:"ml-2 my-auto"},{default:s(()=>[p("fas fa-chevron-right")]),_:1}),e(z,{class:"ml-4 my-auto"},{default:s(()=>[p("Exercises")]),_:1})]),e($),De,i("div",Ee,[i("div",Fe,[e(V,{class:"mr-2"},{default:s(()=>[p("fas fa-file-alt")]),_:1}),ze]),n.value?(h(),w("div",Ne,[e(de,{size:100,width:7,color:"primary",indeterminate:""})])):(h(),w("div",Te,[e(o,{idx:0,type:"Exercise",onUploadFile:m[0]||(m[0]=a=>d.value=a)})]))])]),_:1}),e($,{class:"my-1"}),e(me,null,{default:s(()=>[e(pe),e(x,{text:"Close",class:"text-none bg-blue-lighten-5 text-blue-darken-2",onClick:m[1]||(m[1]=a=>r("openImportCard",!1)),disabled:n.value},null,8,["disabled"]),e(x,{class:"text-none bg-primary",text:"Save",onClick:y,disabled:n.value},null,8,["disabled"])]),_:1})]),_:1})}}}),Ae={class:"d-flex flex-row w-100 justify-space-between"},Re={class:"text-primary"},Je=E({__name:"Exercise",setup(t){const f=F(),r=k(!1),_=k(!1),v=k(0),u=f.params.class_code.toString(),d=he();async function n(){const o=u.substring(6,12),{data:a}=await q.get(`/api/courses/${o}/classes/${u}`);v.value=a.pk}function b(o){window.open(o,"_blank")}const g=k();async function y(){const{data:o}=await q.get(`/api/classes/${u}/exercises`);g.value=o.map(a=>{const C=a.level===1?"1-easy":a.level===2?"2-medium":a.level===3?"3-hard":"";return{question:a.exercise_code,name:a.exercise_name,level:C,topic:a.topic,lab_id:a.lab,outcome_id:a.outcome,bkel_link:a.url}})}_e(async()=>{await n(),await y()});function c(o){return o==="3-hard"?"red":o==="2-medium"?"orange":"green"}const m=[{title:"question",align:"start",key:"question",sortable:!1},{title:"name",align:"start",key:"name",sortable:!1},{title:"level",align:"start",key:"level",sortable:!1},{title:"topic",align:"start",key:"topic",sortable:!1},{title:"lab_id",align:"start",key:"lab_id",sortable:!1},{title:"outcome_id",align:"start",key:"outcome_id",sortable:!1},{title:"bkel_link",align:"center",key:"bkel_link",sortable:!1}];return(o,a)=>{const C=ge,T=Ue,N=Se;return h(),w(be,null,[e(C),e(ve,null,{default:s(()=>[i("div",Ae,[i("h1",Re," ["+P(I(u).substring(6))+"] Exercises ",1),i("div",null,[e(B,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l)},{activator:s(({props:l})=>[e(x,S({onClick:a[0]||(a[0]=U=>I(d).resetCourse()),variant:"outlined"},l,{class:"text-none text-primary mr-3","prepend-icon":"fas fa-file-upload"}),{default:s(()=>[p("Import")]),_:2},1040)]),default:s(()=>[e(T,{classId:v.value,onOpenImportCard:a[1]||(a[1]=l=>{r.value=l,y()})},null,8,["classId"])]),_:1},8,["modelValue"]),e(B,{modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=l=>_.value=l)},{activator:s(({props:l})=>[e(x,S({variant:"flat",height:"40"},l,{class:"text-none bg-primary text-white","prepend-icon":"fas fa-plus"}),{default:s(()=>[p("New question")]),_:2},1040)]),default:s(()=>[e(N)]),_:1},8,["modelValue"])])]),e(Ce,{class:"border-sm rounded-lg mt-8",items:g.value,headers:m,"item-value":"name","show-select":""},{"item.level":s(({value:l})=>[e(z,{color:c(l)},{default:s(()=>[p(P(l),1)]),_:2},1032,["color"])]),"item.bkel_link":s(({value:l})=>[e(x,{icon:"",variant:"plain",onClick:U=>b(l)},{default:s(()=>[e(V,{size:"xsmall",class:"text-dark-grey"},{default:s(()=>[p("fas fa-link")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})],64)}}});export{Je as default};
