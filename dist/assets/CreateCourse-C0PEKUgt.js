import{d as P,o as m,e as g,b as u,g as a,w as i,j as x,i as N,h as ce,F as C,r as I,a as oe,I as R,G as X,f as w,J as S,c as $,t as L,V as K,p as me,k as fe,_ as ve,K as A,L as pe,M as E,N as T,E as q,O as re,P as be,Q as _e,R as ye,S as Q,T as Ve,U as ge,W as he,X as ae,Y as Ce,Z as xe,v as J,u as ke,q as $e,$ as G,z,a0 as Y,a1 as Ie,a2 as ue,a3 as Se,a4 as we,a5 as Le,a6 as Ne,a7 as Be,a8 as D,a9 as De,aa as Pe,ab as Oe,ac as Fe,ad as Ue,ae as Re,af as O,s as Ae,C as Ee,H as Te}from"./index-C_42H0vA.js";import{u as H,_ as ne}from"./FileInput.vue_vue_type_script_setup_true_lang-02-UQY82.js";import{b as F,a as M,d as U,c as W,V as se}from"./VWindowItem-D50w3oeQ.js";import{V as de}from"./VTable-ZC2Vq1Lr.js";import{h as j}from"./http-nrUfQssp.js";const Ge={class:"d-flex flex-row"},ze=u("h3",{class:"my-auto text-primary"},"Analysis",-1),Me=u("p",{class:"text-dark-grey"},"Process all of your input",-1),We={class:"mt-16 mx-auto",style:{height:"200px",width:"80%"}},qe={class:"ma-auto text-center"},je=u("p",{class:"mt-4 text-primary"},"In progress to send request to system. Wait few minutes for processing!",-1),He=P({__name:"AnalysisForm",props:{loading:{type:Boolean,default:!0}},setup(e){return(r,t)=>(m(),g(C,null,[u("div",Ge,[a(N,{class:"my-auto mr-2 text-sub",size:"small"},{default:i(()=>[x("fas fa-undo-alt")]),_:1}),ze]),Me,u("div",We,[u("div",qe,[a(ce,{color:"blue-darken-1","model-value":"100",rounded:"",indeterminate:e.loading},null,8,["indeterminate"]),je])])],64))}}),Z=e=>(me("data-v-9ac9abeb"),e=e(),fe(),e),Je={class:"bg-grey"},Ke=Z(()=>u("th",{class:"text-left"},"LO",-1)),Qe=Z(()=>u("th",{class:"text-center"},"Total",-1)),Xe=Z(()=>u("th",{class:"text-center"},"Threshold",-1)),Ye={class:"text-center"},Ze={class:"text-center"},et=P({__name:"DistributionForm",props:{classIdx:{type:Number,required:!0},outcomes:{type:Array,default:[]}},setup(e){const r=e;function t(s,o,l){return l.indexOf(s)===o}const f=H(),b=r.outcomes.map(s=>s.parent_outcome).filter(t),c=I(""),V=f.selectedCourse.NumOfLabs,p=Array.from({length:V},(s,o)=>o+1).map(s=>`Lab ${s}`);function _(s,o){return(""+s.subLO).localeCompare(o.subLO)}const d=oe({weight:r.outcomes.map(s=>({subLO:s.outcome_code,labs:Array(V),threshold:s.threshold})).sort(_)}),k=R(()=>{let s=Array();return d.weight.forEach(o=>{let l=0;o.labs.forEach(y=>{l+=y}),s.push(l)}),s});function h(){var s=d.weight.flatMap(o=>o.labs.map((l,y)=>({LabName:p[y],Outcome:o.subLO,Threshold:o.threshold,Contribution:l})));console.log("New labs ",s),f.setLabs(r.classIdx,s)}return X(()=>{let s=f.getValidClasses()[r.classIdx];if(s.Labs.length>0){var o=s.Labs.map(l=>({subLO:l.Outcome,threshold:l.Threshold,labs:[]}));s.Labs.forEach(l=>{var y;(y=o.find(n=>n.subLO==l.Outcome))==null||y.labs.push(l.Contribution)}),d.weight=o}}),(s,o)=>(m(),g(C,null,[a(M,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=l=>c.value=l)},{default:i(()=>[(m(!0),g(C,null,w(S(b),(l,y)=>(m(),$(F,{key:y,value:l},{default:i(()=>[x(L(l),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(W,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value=l),class:"mt-3"},{default:i(()=>[(m(!0),g(C,null,w(S(b),(l,y)=>(m(),$(U,{key:y,value:l},{default:i(()=>[a(de,null,{default:i(()=>[u("thead",Je,[u("tr",null,[Ke,(m(!0),g(C,null,w(S(p),(n,v)=>(m(),g("th",{class:"text-center",key:v},L(n),1))),128)),Qe,Xe])]),u("tbody",null,[(m(!0),g(C,null,w(d.weight.filter(n=>n.subLO.substring(0,5)==l).sort(_),(n,v)=>(m(),g("tr",{key:v},[u("td",null,L(n.subLO),1),(m(!0),g(C,null,w(S(p),(B,ee)=>(m(),g("td",{key:ee},[a(K,{placeholder:"%",density:"compact",flat:"",variant:"outlined",class:"my-1 text-sm-body-1",color:"dark-grey","onUpdate:modelValue":ie=>{if(console.log("Active tab ",c.value,n.subLO),n.subLO.substring(0,5)==c.value){var te=n.labs;te[ee]=parseInt(ie),d.weight[v].labs=te,h()}}},null,8,["onUpdate:modelValue"])]))),128)),u("td",Ye,[a(N,{size:"small"},{default:i(()=>[x("fas fa-bolt")]),_:1}),x("  "+L(k.value[v])+"% ",1)]),u("td",Ze,L(n.threshold),1)]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64))}}),tt=ve(et,[["__scopeId","data-v-9ac9abeb"]]),at={class:"mt-3 w-100"},st=u("h3",null,"Classes",-1),lt=u("p",null,"Exercise for each class",-1),ot={class:"d-flex flex-row mt-5"},rt={class:"d-flex flex-row text-primary"},ut=u("h3",null,"Submissions file",-1),nt={class:"mt-15"},dt=u("div",{class:"mt-3"},[u("h3",null,"Distribution"),u("p",null,"Exercise for each class")],-1),it={class:"d-flex flex-row mt-5"},ct=u("h3",{class:"text-primary"},"Learning outcome distribution",-1),mt=u("p",{class:"text-dark-grey text-sm-body-2"},"Loading learning outcome details from your data",-1),ft=P({__name:"SubmissionForm",setup(e){const r=I(""),t=I(""),f=H(),b=f.selectedCourse.CourseCode,c=f.getValidClasses(),V=I();X(()=>{p()});async function p(){const{data:_}=await j.get(`/api/courses/${b}/outcomes`);V.value=_.map(d=>({pk:d.pk,outcome_code:d.outcome_code,parent_outcome:d.parent_outcome,threshold:d.threshold}))}return(_,d)=>{const k=ne,h=tt;return m(),g(C,null,[a(M,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=s=>r.value=s),class:"w-100"},{default:i(()=>[a(F,{class:"text-none",value:"Submissions"},{default:i(()=>[a(N,null,{default:i(()=>[x("fas fa-circle-check")]),_:1}),x("  Submissions")]),_:1}),a(F,{class:"text-none",value:"LODistribution"},{default:i(()=>[x("LO Distribution")]),_:1})]),_:1},8,["modelValue"]),a(W,{class:"mt-3 w-100",modelValue:r.value,"onUpdate:modelValue":d[5]||(d[5]=s=>r.value=s)},{default:i(()=>[a(U,{value:"Submissions"},{default:i(()=>[u("div",at,[st,lt,u("div",ot,[a(M,{direction:"vertical",modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=s=>t.value=s),class:"w-25"},{default:i(()=>[(m(!0),g(C,null,w(S(c),(s,o)=>(m(),$(F,{key:o,value:s.Name},{default:i(()=>[x(L(s.Name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(W,{modelValue:t.value,"onUpdate:modelValue":d[2]||(d[2]=s=>t.value=s),class:"border-sm rounded w-75 pa-4",style:{height:"250px","margin-top":"-70px"}},{default:i(()=>[(m(!0),g(C,null,w(S(c),(s,o)=>(m(),$(U,{key:o,value:s.Name},{default:i(()=>[u("div",rt,[a(N,{class:"mr-2"},{default:i(()=>[x("fas fa-file-alt")]),_:1}),ut]),u("div",nt,[a(k,{idx:o,type:"Submission"},null,8,["idx"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),_:1}),a(U,{value:"LODistribution"},{default:i(()=>[dt,u("div",it,[a(M,{direction:"vertical",modelValue:t.value,"onUpdate:modelValue":d[3]||(d[3]=s=>t.value=s),class:"w-25"},{default:i(()=>[(m(!0),g(C,null,w(S(c),(s,o)=>(m(),$(F,{key:o,value:s.Name},{default:i(()=>[x(L(s.Name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(W,{modelValue:t.value,"onUpdate:modelValue":d[4]||(d[4]=s=>t.value=s),class:"border-sm rounded w-75 pa-4",style:{height:"400px","margin-top":"-70px"}},{default:i(()=>[(m(!0),g(C,null,w(S(c),(s,o)=>(m(),$(U,{key:o,value:s.Name},{default:i(()=>[ct,mt,a(h,{outcomes:V.value,classIdx:o},null,8,["outcomes","classIdx"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])],64)}}}),vt=A({...pe({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),pt=E()({name:"VRadio",props:vt(),setup(e,r){let{slots:t}=r;return T(()=>a(re,q(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),t)),{}}}),bt=A({height:{type:[Number,String],default:"auto"},...be(),..._e(ye(),["multiple"]),trueIcon:{type:Q,default:"$radioOn"},falseIcon:{type:Q,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),_t=E()({name:"VRadioGroup",inheritAttrs:!1,props:bt(),emits:{"update:modelValue":e=>!0},setup(e,r){let{attrs:t,slots:f}=r;const b=Ve(),c=R(()=>e.id||`radio-group-${b}`),V=ge(e,"modelValue");return T(()=>{const[p,_]=he(t),d=ae.filterProps(e),k=re.filterProps(e),h=f.label?f.label({label:e.label,props:{for:c.value}}):e.label;return a(ae,q({class:["v-radio-group",e.class],style:e.style},p,d,{modelValue:V.value,"onUpdate:modelValue":s=>V.value=s,id:c.value}),{...f,default:s=>{let{id:o,messagesId:l,isDisabled:y,isReadonly:n}=s;return a(C,null,[h&&a(Ce,{id:o.value},{default:()=>[h]}),a(xe,q(k,{id:o.value,"aria-describedby":l.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:y.value,readonly:n.value,"aria-labelledby":h?o.value:void 0,multiple:!1},_,{modelValue:V.value,"onUpdate:modelValue":v=>V.value=v}),f)])}})}),{}}}),yt={class:"d-flex flex-row"},Vt=u("h3",{class:"my-auto text-primary"},"General Information",-1),gt={class:"d-flex flex-row mt-4"},ht=u("h3",{class:"my-auto text-primary"},"Classes",-1),Ct=u("thead",null,[u("tr",null,[u("th",null,"Class"),u("th",{class:"w-50"},"Exercises file"),u("th",null,"Default")])],-1),xt={class:"w-50"},kt=P({__name:"CreateCourseForm",setup(e){const r=H(),t=I(""),f=I(""),b=I(),c=I(),V=I(),p=oe({classes:[{Name:"",Default:!1}]});X(()=>{_(),d();var o=r.getValidClasses();o.length>0&&(p.classes=o),t.value=r.selectedCourse.CourseName,f.value=r.selectedCourse.Semester,b.value=r.selectedCourse.NumOfLabs});async function _(){const{data:o}=await j.get("/api/courses");c.value=o.map(l=>({pk:l.pk,course_code:l.course_code,course_name:l.course_name}))}async function d(){const{data:o}=await j.get("/api/courses/semesters");V.value=o.map(l=>({pk:l.pk,semester_name:l.semester_name}))}function k(){p.classes.push({Name:"",Default:!1,Labs:[]}),r.addClass({Name:"",Default:!1,Labs:[]})}function h(o){var y,n;let l=o??"";r.editCourse("CourseName",l),r.editCourse("CourseCode",((n=(y=c.value)==null?void 0:y.find(v=>v.course_name==l))==null?void 0:n.course_code)??"")}function s(o){var y,n;let l=o??"";r.editCourse("Semester",l),r.editCourse("SemesterId",((n=(y=V.value)==null?void 0:y.find(v=>v.semester_name==l))==null?void 0:n.pk)??0)}return(o,l)=>{const y=ne;return m(),g(C,null,[u("div",yt,[a(N,{class:"my-auto mr-2 text-sub",size:"small"},{default:i(()=>[x("fas fa-info-circle")]),_:1}),Vt]),a(ke,{class:"mt-4"},{default:i(()=>[a(J,{cols:"6"},{default:i(()=>{var n;return[a(se,{label:"Course Name",items:(n=c.value)==null?void 0:n.map(v=>v.course_name),variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:t.value,"onUpdate:modelValue":[l[0]||(l[0]=v=>t.value=v),l[1]||(l[1]=v=>h(v))]},null,8,["items","modelValue"])]}),_:1}),a(J,{cols:"3"},{default:i(()=>{var n;return[a(se,{label:"Semester",items:(n=V.value)==null?void 0:n.map(v=>v.semester_name),variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:f.value,"onUpdate:modelValue":[l[2]||(l[2]=v=>f.value=v),l[3]||(l[3]=v=>s(v))]},null,8,["items","modelValue"])]}),_:1}),a(J,{cols:"3"},{default:i(()=>[a(K,{"bg-color":"#F3F4F6",label:"No. of Lab",color:"sub",placeholder:"Enter number of labs",variant:"outlined",density:"comfortable",modelValue:b.value,"onUpdate:modelValue":[l[4]||(l[4]=n=>b.value=n),l[5]||(l[5]=n=>S(r).editCourse("NumOfLabs",parseInt(n)))]},null,8,["modelValue"])]),_:1})]),_:1}),a($e,{class:"my-2"}),u("div",gt,[a(N,{class:"my-auto mr-2 text-sub",size:"small"},{default:i(()=>[x("far fa-calendar")]),_:1}),ht]),a(de,null,{default:i(()=>[Ct,u("tbody",null,[(m(!0),g(C,null,w(p.classes,(n,v)=>(m(),g("tr",{key:v},[u("td",null,[a(K,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Class",class:"my-2",density:"compact",modelValue:n.Name,"onUpdate:modelValue":[B=>n.Name=B,B=>S(r).setClassName(v,n.Name)]},null,8,["modelValue","onUpdate:modelValue"])]),u("td",xt,[a(y,{idx:v,type:"Exercise"},null,8,["idx"])]),u("td",null,[a(_t,{color:"#4B7BEC",modelValue:n.Default,"onUpdate:modelValue":[B=>n.Default=B,B=>S(r).setClassDefault(v,n.Default)]},{default:i(()=>[a(pt,{class:"text-blue-darken-4",label:"Apply for other classes"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1}),a(z,{onClick:l[6]||(l[6]=G(n=>k(),["prevent"])),variant:"plain",class:"text-none text-primary","prepend-icon":"fas fa-plus"},{default:i(()=>[x("Add more class")]),_:1})],64)}}}),$t=A({divider:[Number,String],...Y()},"VBreadcrumbsDivider"),It=E()({name:"VBreadcrumbsDivider",props:$t(),setup(e,r){let{slots:t}=r;return T(()=>{var f;return a("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((f=t==null?void 0:t.default)==null?void 0:f.call(t))??e.divider])}),{}}}),St=A({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Y(),...Ie(),...ue({tag:"li"})},"VBreadcrumbsItem"),wt=E()({name:"VBreadcrumbsItem",props:St(),setup(e,r){let{slots:t,attrs:f}=r;const b=Se(e,f),c=R(()=>{var d;return e.active||((d=b.isActive)==null?void 0:d.value)}),V=R(()=>c.value?e.activeColor:e.color),{textColorClasses:p,textColorStyles:_}=we(V);return T(()=>a(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":c.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:c.value&&e.activeClass},p.value,e.class],style:[_.value,e.style],"aria-current":c.value?"page":void 0},{default:()=>{var d,k;return[b.isLink.value?a("a",{class:"v-breadcrumbs-item--link",href:b.href.value,"aria-current":c.value?"page":void 0,onClick:b.navigate},[((k=t.default)==null?void 0:k.call(t))??e.title]):((d=t.default)==null?void 0:d.call(t))??e.title]}})),{}}}),Lt=A({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Q,items:{type:Array,default:()=>[]},...Y(),...Le(),...Ne(),...ue({tag:"ul"})},"VBreadcrumbs"),Nt=E()({name:"VBreadcrumbs",props:Lt(),setup(e,r){let{slots:t}=r;const{backgroundColorClasses:f,backgroundColorStyles:b}=Be(D(e,"bgColor")),{densityClasses:c}=De(e),{roundedClasses:V}=Pe(e);Oe({VBreadcrumbsDivider:{divider:D(e,"divider")},VBreadcrumbsItem:{activeClass:D(e,"activeClass"),activeColor:D(e,"activeColor"),color:D(e,"color"),disabled:D(e,"disabled")}});const p=R(()=>e.items.map(_=>typeof _=="string"?{item:{title:_},raw:_}:{item:_,raw:_}));return T(()=>{const _=!!(t.prepend||e.icon);return a(e.tag,{class:["v-breadcrumbs",f.value,c.value,V.value,e.class],style:[b.value,e.style]},{default:()=>{var d;return[_&&a("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[t.prepend?a(Fe,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},t.prepend):a(N,{key:"prepend-icon",start:!0,icon:e.icon},null)]),p.value.map((k,h,s)=>{var y;let{item:o,raw:l}=k;return a(C,null,[((y=t.item)==null?void 0:y.call(t,{item:o,index:h}))??a(wt,q({key:h,disabled:h>=s.length-1},typeof o=="string"?{title:o}:o),{default:t.title?()=>{var n;return(n=t.title)==null?void 0:n.call(t,{item:o,index:h})}:void 0}),h<s.length-1&&a(It,null,{default:t.divider?()=>{var n;return(n=t.divider)==null?void 0:n.call(t,{item:l,index:h})}:void 0})])}),(d=t.default)==null?void 0:d.call(t)]}})}),{}}}),Bt=P({__name:"BreadCrumb",props:{activeIdx:{type:Number,default:0}},setup(e){const r=e,t=I([{title:"Classes & Exercises",icon:"fas fa-book",color:"#6F9CEB",disabled:!1},{title:"Submissions",icon:"fas fa-file-code",color:"",disabled:!0},{title:"Analysis",icon:"fas fa-chart-pie",color:"",disabled:!0}]);return Ue(()=>r.activeIdx,(f,b)=>{t.value.forEach(c=>{t.value[b].color="",t.value[b].disabled=!0,t.value[f].color="#6F9CEB",t.value[f].disabled=!1})}),(f,b)=>(m(),$(Nt,{items:t.value,rounded:"",class:"bg-grey py-6 border-sm"},{divider:i(()=>[a(N,{size:"xsmall"},{default:i(()=>[x("fas fa-chevron-right")]),_:1})]),title:i(({item:c})=>[a(N,{size:"small"},{default:i(()=>[x(L(c.icon),1)]),_:2},1024),x("  "+L(c.title),1)]),_:1},8,["items"]))}}),Dt=u("h1",null,"Create classes",-1),Pt={class:"border-sm px-3 py-5 rounded mt-4"},Ot={class:"mt-2 text-right"},le=2,Tt=P({__name:"CreateCourse",setup(e){const r=I(0),t=H(),f=Re(),b=Ee();async function c(){r.value++;let V=t.getValidClasses();for(let p=0;p<V.length;p++){const _=V[p];await j.post(`/api/courses/${t.selectedCourse.CourseCode}/classes/`,{semester:t.selectedCourse.SemesterId,num_of_lab:t.selectedCourse.NumOfLabs,teacher:f.user.email,role:"Lecturer",group:_.Name}).then(function(d){setTimeout(()=>{b.push({name:"class-home"})},1e3)}).catch(()=>{})}}return(V,p)=>{const _=Te,d=Bt,k=kt,h=ft,s=He;return m(),g(C,null,[a(_),a(Ae,null,{default:i(()=>[Dt,a(d,{activeIdx:r.value,class:"my-2"},null,8,["activeIdx"]),u("div",Pt,[r.value===0?(m(),$(k,{key:0})):O("",!0),r.value===1?(m(),$(h,{key:1})):O("",!0),r.value===2?(m(),$(s,{key:2})):O("",!0)]),u("div",Ot,[a(z,{disabled:r.value<=0,variant:"plain",text:"Back","prepend-icon":"fas fa-arrow-left",class:"text-none bg-light-blue text-sub mr-3",onClick:p[0]||(p[0]=G(o=>r.value--,["prevent"]))},null,8,["disabled"]),r.value+1<le?(m(),$(z,{key:0,variant:"plain","append-icon":"fas fa-arrow-right",class:"text-none bg-primary",text:"Next",onClick:p[1]||(p[1]=G(o=>r.value++,["prevent"]))})):O("",!0),r.value+1>=le?(m(),$(z,{key:1,variant:"plain","append-icon":"fas fa-arrow-right",class:"text-none bg-primary",text:"Finish",onClick:G(c,["prevent"])})):O("",!0)])]),_:1})],64)}}});export{Tt as default};
