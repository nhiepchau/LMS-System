import{d as x,y as U,a as c,k as d,b as e,w as l,e as o,f,g as m,z as w,A as i,m as r,j as N,F as h,l as k,q as _,B as V,x as T,C as B,D,_ as O,h as b}from"./index-MoPcLG9q.js";import{V as z}from"./VTable-DrOtf772.js";const L=o("h1",null,"Create course",-1),$={class:"border-sm px-3 py-5 rounded-lg mt-4"},j={class:"d-flex flex-row"},A=o("h3",{class:"my-auto text-primary"},"General Information",-1),I={class:"d-flex flex-row mt-4"},R=o("h3",{class:"my-auto text-primary"},"Learning outcomes",-1),q=o("thead",null,[o("tr",null,[o("th",null,"Outcome"),o("th",null,"Threshold"),o("th",{class:"w-50"},"Description")])],-1),E={class:"w-50"},G={class:"mt-2 text-right"},J=x({__name:"CreateCourse",setup(M){const p=B("create-notification"),t=U({courseCode:"",courseName:"",department:"",outcomes:[{outcome:"",threshold:5,description:""}]});function y(){t.outcomes.push({outcome:"",threshold:5,description:""})}const F=D();async function C(){await b.post("/api/courses/",{course_code:t.courseCode,course_name:t.courseName,department:t.department}).then(async function(v){let a=t.outcomes.filter(n=>n.outcome!=="").map(n=>({outcome_code:n.outcome,outcome_description:n.description,threshold:n.threshold,parent_outcome:n.outcome.substring(0,5)}));console.log("Valid outcomes ",a),await b.post(`/api/courses/${t.courseCode}/outcomes/create`,a).then(function(){p({type:"success",message:"Create new course successfully!"}),setTimeout(()=>{F.push({name:"course-home"})},3e3)})}).catch(function(){p({type:"error",message:"Failed to create new course!"})})}return(v,a)=>{const n=O;return c(),d(h,null,[e(n),e(T,null,{default:l(()=>[L,o("div",$,[o("div",j,[e(f,{class:"my-auto mr-2 text-sub",size:"small"},{default:l(()=>[m("fas fa-info-circle")]),_:1}),A]),e(w,{class:"mt-4"},{default:l(()=>[e(i,{cols:"3"},{default:l(()=>[e(r,{label:"Course code",variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:t.courseCode,"onUpdate:modelValue":a[0]||(a[0]=s=>t.courseCode=s)},null,8,["modelValue"])]),_:1}),e(i,{cols:"6"},{default:l(()=>[e(r,{label:"Course name",variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:t.courseName,"onUpdate:modelValue":a[1]||(a[1]=s=>t.courseName=s)},null,8,["modelValue"])]),_:1}),e(i,{cols:"3"},{default:l(()=>[e(r,{"bg-color":"#F3F4F6",label:"Department",color:"sub",variant:"outlined",density:"comfortable",modelValue:t.department,"onUpdate:modelValue":a[2]||(a[2]=s=>t.department=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,{class:"my-2"}),o("div",I,[e(f,{class:"my-auto mr-2 text-sub",size:"small"},{default:l(()=>[m("far fa-calendar")]),_:1}),R]),e(z,null,{default:l(()=>[q,o("tbody",null,[(c(!0),d(h,null,k(t.outcomes,(s,g)=>(c(),d("tr",{key:g},[o("td",null,[e(r,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Outcome (e.g, L.O.1.1)",class:"mt-2",density:"compact",modelValue:s.outcome,"onUpdate:modelValue":u=>s.outcome=u},null,8,["modelValue","onUpdate:modelValue"])]),o("td",null,[e(r,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Threshold",class:"mt-2",density:"compact",modelValue:s.threshold,"onUpdate:modelValue":u=>s.threshold=u},null,8,["modelValue","onUpdate:modelValue"])]),o("td",E,[e(r,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Description",class:"mt-2",density:"compact",modelValue:s.description,"onUpdate:modelValue":u=>s.description=u},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1}),e(_,{variant:"plain",onClick:a[3]||(a[3]=V(s=>y(),["prevent"])),class:"text-none text-primary","prepend-icon":"fas fa-plus"},{default:l(()=>[m("Add more outcomes")]),_:1})]),o("div",G,[e(_,{variant:"plain","append-icon":"fas fa-arrow-right",class:"text-none bg-primary",text:"Save",onClick:V(C,["prevent"])})])]),_:1})],64)}}});export{J as default};
