import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as A}from"./VForm-BQLKGeLc.js";import{O as j,bh as L,a5 as O,bi as Q,bj as G,bk as H,bl as K,ab as M,a7 as J,ay as W,Q as X,az as Y,ac as Z,ad as ee,bm as ae,bn as se,bo as te,bp as oe,bq as le,af as ne,R as re,b as e,a as x,f as D,w as s,E as ie,B as h,l as r,d as E,b8 as F,K as ce,r as y,ak as ue,q as de,j as V,g as p,m as z,s as $,c as w,N as me,z as pe,A as fe,C as _e,L as ve,o as be,t as P,u as I,G as S,H as q,v as ge,F as ke,h as B,I as ye}from"./index-CD3Z2ZO-.js";import{_ as he}from"./FileInput.vue_vue_type_script_setup_true_lang-CaJ66iyW.js";import{u as xe}from"./course-B5M-fkkV.js";import{r as Ce}from"./VDataTable-Cx5vP7nG.js";const Ve=j({color:String,...L(),...O(),...Q(),...G(),...H(),...K(),...M(),...J(),...W()},"VSheet"),we=X()({name:"VSheet",props:Ve(),setup(t,f){let{slots:i}=f;const{themeClasses:_}=Y(t),{backgroundColorClasses:v,backgroundColorStyles:u}=Z(ee(t,"color")),{borderClasses:d}=ae(t),{dimensionStyles:n}=se(t),{elevationClasses:b}=te(t),{locationStyles:g}=oe(t),{positionClasses:k}=le(t),{roundedClasses:c}=ne(t);return re(()=>e(t.tag,{class:["v-sheet",_.value,v.value,d.value,b.value,k.value,c.value,t.class],style:[u.value,n.value,g.value,t.style]},i)),{}}}),$e={},Pe=r("h3",{class:"text-primary mb-5 text-left"},"Add new question?",-1);function Ie(t,f){return x(),D(we,{class:"mx-auto w-50 pa-5 text-right"},{default:s(()=>[Pe,e(A,{"validate-on":"submit lazy"},{default:s(()=>[e(ie,{label:"Question"}),e(h,{class:"mt-2 text-none bg-light-blue",text:"Submit",type:"submit",variant:"elevated"})]),_:1})]),_:1})}const Se=U($e,[["render",Ie]]),qe={class:"d-flex flex-row text-primary mb-2"},Be=r("h2",{class:"my-auto"},"Import new file",-1),De=r("p",{class:"mt-4"},"Please import more question data for the student ",-1),Ee={class:"border-sm rounded pa-4 my-4 mx-auto",style:{height:"250px"}},Fe={class:"d-flex flex-row text-primary"},ze=r("h3",null,"Exercise file",-1),Ne={key:0,class:"mt-15"},Te={key:1,class:"text-center mt-10"},Re=E({__name:"ImportCard",props:{classId:{type:Number,required:!0}},emits:["openImportCard"],setup(t,{emit:f}){const i=f,_=t,v=F(),u=ce(),d=y(),n=y(!1),b=ue("create-notification"),g="http://127.0.0.1:8000";async function k(){if(d.value){const c=new FormData;c.append("exercise_file",d.value),c.append("class_code",`${_.classId}`),console.log("FormData ",c),n.value=!0,await ve.post(`${g}/api/classes/${v.params.class_code}/exercises/upload`,c,{headers:{Authorization:`Bearer ${u.token}`,"Content-Type":"multipart/form-data"}}).then(function(m){var o;n.value=!1,i("openImportCard",!1),b({type:"success",message:`Uploaded file ${(o=d.value)==null?void 0:o.name} successfully!`})}).catch(function(){n.value=!1,i("openImportCard",!1),b({type:"error",message:"Something's wrong when uploading!"})})}}return(c,m)=>{const o=he;return x(),D(_e,{class:"w-66 mx-auto text-secondary"},{default:s(()=>[e(de,null,{default:s(()=>[r("div",qe,[Be,e(V,{size:"md",class:"ml-2 my-auto"},{default:s(()=>[p("fas fa-chevron-right")]),_:1}),e(z,{class:"ml-4 my-auto"},{default:s(()=>[p("Exercises")]),_:1})]),e($),De,r("div",Ee,[r("div",Fe,[e(V,{class:"mr-2"},{default:s(()=>[p("fas fa-file-alt")]),_:1}),ze]),n.value?(x(),w("div",Te,[e(me,{size:100,width:7,color:"primary",indeterminate:""})])):(x(),w("div",Ne,[e(o,{idx:0,type:"Exercise",onUploadFile:m[0]||(m[0]=a=>d.value=a)})]))])]),_:1}),e($,{class:"my-1"}),e(pe,null,{default:s(()=>[e(fe),e(h,{text:"Close",class:"text-none bg-blue-lighten-5 text-blue-darken-2",onClick:m[1]||(m[1]=a=>i("openImportCard",!1)),disabled:n.value},null,8,["disabled"]),e(h,{class:"text-none bg-primary",text:"Save",onClick:k,disabled:n.value},null,8,["disabled"])]),_:1})]),_:1})}}}),Ue={class:"d-flex flex-row w-100 justify-space-between"},Ae={class:"text-primary"},Ke=E({__name:"Exercise",setup(t){const f=F(),i=y(!1),_=y(!1),v=y(0),u=f.params.class_code.toString(),d=xe();async function n(){const o=u.substring(6,12),{data:a}=await B.get(`/api/courses/${o}/classes/${u}`);v.value=a.pk}function b(o){window.open(o,"_blank")}const g=y();async function k(){const{data:o}=await B.get(`/api/classes/${u}/exercises`);g.value=o.map(a=>{const C=a.level===1?"1-easy":a.level===2?"2-medium":a.level===3?"3-hard":"";return{question:a.exercise_code,name:a.exercise_name,level:C,topic:a.topic,lab_id:a.lab,outcome_id:a.outcome,bkel_link:a.url}})}be(async()=>{await n(),await k()});function c(o){return o==="3-hard"?"red":o==="2-medium"?"orange":"green"}const m=[{title:"question",align:"start",key:"question",sortable:!1},{title:"name",align:"start",key:"name",sortable:!1},{title:"level",align:"start",key:"level",sortable:!1},{title:"topic",align:"start",key:"topic",sortable:!1},{title:"lab_id",align:"start",key:"lab_id",sortable:!1},{title:"outcome_id",align:"start",key:"outcome_id",sortable:!1},{title:"bkel_link",align:"center",key:"bkel_link",sortable:!1}];return(o,a)=>{const C=ye,N=Re,T=Se;return x(),w(ke,null,[e(C),e(ge,null,{default:s(()=>[r("div",Ue,[r("h1",Ae," ["+P(I(u).substring(6))+"] Exercises ",1),r("div",null,[e(S,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=l=>i.value=l)},{activator:s(({props:l})=>[e(h,q({onClick:a[0]||(a[0]=R=>I(d).resetCourse()),variant:"outlined"},l,{class:"text-none text-primary mr-3","prepend-icon":"fas fa-file-upload"}),{default:s(()=>[p("Import")]),_:2},1040)]),default:s(()=>[e(N,{classId:v.value,onOpenImportCard:a[1]||(a[1]=l=>{i.value=l,k()})},null,8,["classId"])]),_:1},8,["modelValue"]),e(S,{modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=l=>_.value=l)},{activator:s(({props:l})=>[e(h,q({variant:"flat",height:"40"},l,{class:"text-none bg-primary text-white","prepend-icon":"fas fa-plus"}),{default:s(()=>[p("New question")]),_:2},1040)]),default:s(()=>[e(T)]),_:1},8,["modelValue"])])]),e(Ce,{class:"border-sm rounded-lg mt-8",items:g.value,headers:m,"item-value":"name","show-select":""},{"item.level":s(({value:l})=>[e(z,{color:c(l)},{default:s(()=>[p(P(l),1)]),_:2},1032,["color"])]),"item.bkel_link":s(({value:l})=>[e(h,{icon:"",variant:"plain",onClick:R=>b(l)},{default:s(()=>[e(V,{size:"xsmall",class:"text-dark-grey"},{default:s(()=>[p("fas fa-link")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})],64)}}});export{Ke as default};
