import{u as le}from"./course-CL_v0EK1.js";import{R as ae,X as ne,av as oe,br as ue,T as se,at as ie,a2 as re,bs as ce,a1 as d,bt as $,r as S,ak as de,U as fe,a3 as ve,a4 as D,bu as pe,b as s,bv as me,v as x,F as h,i as j,bw as ye,aJ as ge,az as Ce,bx as ke,d as he,o as be,a as k,c as E,w as U,k as z,l as Fe,g as Ve,t as T,P as Se}from"./index-MoPcLG9q.js";const Ie=ae({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...ne({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>oe(e).every(f=>f!=null&&typeof f=="object")},...ue({clearable:!0})},"VFileInput"),we=se()({name:"VFileInput",inheritAttrs:!1,props:Ie(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,f){let{attrs:b,emit:u,slots:l}=f;const{t:F}=ie(),n=re(e,"modelValue"),{isFocused:o,focus:i,blur:v}=ce(e),p=d(()=>typeof e.showSize!="boolean"?e.showSize:void 0),m=d(()=>(n.value??[]).reduce((t,a)=>{let{size:y=0}=a;return t+y},0)),P=d(()=>$(m.value,p.value)),I=d(()=>(n.value??[]).map(t=>{const{name:a="",size:y=0}=t;return e.showSize?`${a} (${$(y,p.value)})`:a})),L=d(()=>{var a;const t=((a=n.value)==null?void 0:a.length)??0;return e.showSize?F(e.counterSizeString,t,P.value):F(e.counterString,t)}),B=S(),R=S(),r=S(),J=d(()=>o.value||e.active),A=d(()=>["plain","underlined"].includes(e.variant));function w(){var t;r.value!==document.activeElement&&((t=r.value)==null||t.focus()),o.value||i()}function O(t){var a;(a=r.value)==null||a.click()}function X(t){u("mousedown:control",t)}function q(t){var a;(a=r.value)==null||a.click(),u("click:control",t)}function G(t){t.stopPropagation(),w(),Ce(()=>{n.value=[],ke(e["onClick:clear"],t)})}return de(n,t=>{(!Array.isArray(t)||!t.length)&&r.value&&(r.value.value="")}),fe(()=>{const t=!!(l.counter||e.counter),a=!!(t||l.details),[y,H]=ve(b),{modelValue:ze,...K}=D.filterProps(e),Q=pe(e);return s(D,x({ref:B,modelValue:n.value,"onUpdate:modelValue":g=>n.value=g,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":O},y,K,{centerAffix:!A.value,focused:o.value}),{...l,default:g=>{let{id:V,isDisabled:C,isDirty:_,isReadonly:N,isValid:W}=g;return s(me,x({ref:R,"prepend-icon":e.prependIcon,onMousedown:X,onClick:q,"onClick:clear":G,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Q,{id:V.value,active:J.value||_.value,dirty:_.value,disabled:C.value,focused:o.value,error:W.value===!1}),{...l,default:Y=>{var M;let{props:{class:Z,...ee}}=Y;return s(h,null,[s("input",x({ref:r,type:"file",readonly:N.value,disabled:C.value,multiple:e.multiple,name:e.name,onClick:c=>{c.stopPropagation(),N.value&&c.preventDefault(),w()},onChange:c=>{if(!c.target)return;const te=c.target;n.value=[...te.files??[]]},onFocus:w,onBlur:v},ee,H),null),s("div",{class:Z},[!!((M=n.value)!=null&&M.length)&&(l.selection?l.selection({fileNames:I.value,totalBytes:m.value,totalBytesReadable:P.value}):e.chips?I.value.map(c=>s(j,{key:c,size:"small",color:e.color},{default:()=>[c]})):I.value.join(", "))])])}})},details:a?g=>{var V,C;return s(h,null,[(V=l.details)==null?void 0:V.call(l,g),t&&s(h,null,[s("span",null,null),s(ye,{active:!!((C=n.value)!=null&&C.length),value:L.value},l.counter)])])}:void 0})}),ge({},B,R,r)}}),xe={key:1,class:"text-overline text-grey-darken-3 mx-2"},Re=he({__name:"FileInput",props:{idx:{type:Number,default:-1},type:{type:String,default:""}},emits:["uploadFile"],setup(e,{emit:f}){const b=le(),u=S([]),l=e,F=f;be(()=>{var o=b.getValidClasses();if(!(l.type!=="Submission"&&l.type!=="Exercise")&&l.idx>=0&&o.length>l.idx){u.value=[];const i=o[l.idx][l.type];i&&u.value.push(i)}});async function n(){if(u.value.length>0){let o=u.value.at(0);o&&(b.setClassFile(l.idx,o,l.type),F("uploadFile",o))}}return(o,i)=>(k(),E(we,{modelValue:u.value,"onUpdate:modelValue":[i[0]||(i[0]=v=>u.value=v),i[1]||(i[1]=v=>n())],"show-size":1e3,color:"sub",label:"File input",placeholder:"Choose your file","prepend-icon":"fas fa-paperclip",variant:"outlined",counter:"",density:"compact"},{selection:U(({fileNames:v})=>[(k(!0),z(h,null,Fe(v,(p,m)=>(k(),z(h,{key:p},[m<2?(k(),E(j,{key:0,class:"me-2",color:"#6F9CEB",size:"small",label:""},{default:U(()=>[Ve(T(p),1)]),_:2},1024)):m===2?(k(),z("span",xe," +"+T(u.value.length-2)+" File(s) ",1)):Se("",!0)],64))),128))]),_:1},8,["modelValue"]))}});export{Re as _};
