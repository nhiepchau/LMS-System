import{d as N,b4 as U,bb as I,b5 as Z,b6 as q,bc as H,bd as J,be as M,r as _,J as Y,Z as L,ai as z,a as x,c as S,l as o,t as B,b as d,b9 as y,u as A,bg as E,s as G,F as P,e as K,f as Q,H as X,h,bY as ee,o as se,w as te,v as ae,I as oe}from"./index-CD3Z2ZO-.js";const ne={class:"d-flex flex-row justify-space-between w-100"},le={class:"w-66"},ce={class:"d-flex flex-row mt-2 mb-2"},ie={style:{width:"50%",height:"300px"}},re={class:"d-flex flex-row justify-space-between"},ue={class:"w-33"},de={class:"mt-2 font-italic font-weight-medium text-dark-brown"},me={style:{width:"50%",height:"300px"}},_e={class:"w-33 text-right"},pe={class:"w-100 mt-5"},fe=o("h3",null,"Suggested Exercises for Student",-1),be={class:"mt-3 d-flex flex-row justify-space-between"},ve={class:"w-25"},ge={class:"w-66"},he=N({__name:"CombineChart",props:{title:{type:String,default:"Statistics"},classCode:{type:String,default:""},numOfLab:{type:Number,default:0}},setup(F){U.register(I,Z,q,H,J,M);const i=_(),p=_(""),f=_(""),m=_(),g=_(),b=_(),a=F,r=Y({averageProgress:0,chartData:{labels:[],datasets:[{label:"",backgroundColor:"",data:[],barThickness:0,borderWidth:0}]},secondChartData:{labels:[],datasets:[{label:"",backgroundColor:"",data:[],barThickness:0,borderWidth:0}]}}),v=L(()=>r.chartData),n=L(()=>r.secondChartData);async function k(l){await h.get(`/api/classes/${l}/students`).then(function(s){var u,e;const{data:t}=s;g.value=t.map(c=>({student_id:c.student_id,secured_student_id:c.secured_student_id,first_name:c.first_name,last_name:c.last_name})),i.value=((e=(u=g.value)==null?void 0:u.at(0))==null?void 0:e.student_id)??0,i.value&&(w(a.classCode,i.value),D(a.classCode,i.value))})}async function C(l){await h.get(`/api/classes/${l}/outcomes/${p.value}/histogram`).then(function(s){const{data:t}=s;r.chartData={labels:["0 - 0.2","0.2 - 0.4","0.4 - 0.6","0.6 - 0.8","0.8 - 1"],datasets:[{label:"Number of student",backgroundColor:"#4EA699",data:[t["0 - 0.2"],t["0.2 - 0.4"],t["0.4 - 0.6"],t["0.6 - 0.8"],t["0.8 - 1"]],barThickness:30,borderWidth:1}]},r.averageProgress=t.average})}async function w(l,s){const t=`${a.numOfLab}-post`;await h.get(`/api/classes/${l}/students/${s}/from/${t}/to/${t}/progress`).then(function(u){var O;const{data:e}=u,c=(O=m.value)==null?void 0:O.map($=>e[$][0]*100),V=c==null?void 0:c.map($=>100-$);r.secondChartData={labels:m.value??[],datasets:[{label:"Passed",backgroundColor:"#222E50",data:c??[],barThickness:20,borderWidth:1},{label:"Failed",backgroundColor:"#C8D6F9",data:V,barThickness:20,borderWidth:1}]}})}async function D(l,s){await h.get(`/api/classes/${l}/students/${s}/recommend`).then(function(t){const{data:u}=t;b.value=u.map(e=>({exercise_id:e.exercise_id,exercise_code:e.exercise_code,exercise_name:e.exercise_name,level:e.level}))})}function T(l,s){return(""+l).localeCompare(s)}async function W(l){const s=l.substring(6,12);await h.get(`/api/courses/${s}/outcomes`).then(function(t){var e,c;const{data:u}=t;m.value=u.map(V=>V.outcome_code).sort(T),p.value=((e=m.value)==null?void 0:e.at(0))??"",f.value=((c=m.value)==null?void 0:c.at(0))??"",p.value&&C(a.classCode)})}const j={responsive:!0,maintainAspectRatio:!1},R={responsive:!0,indexAxis:"x",maintainAspectRatio:!1,scales:{x:{stacked:!0},y:{stacked:!0,max:100,beginAtZero:!0,ticks:{callback:function(l,s,t){return l+"%"}}}}};return z(()=>a.classCode,()=>{C(a.classCode),k(a.classCode),W(a.classCode)}),(l,s)=>{var u;const t=ee;return x(),S("div",X({class:"pa-4 border-sm rounded-lg"},l.$attrs),[o("div",ne,[o("h3",le,B(a.title),1)]),o("div",ce,[o("div",ie,[o("div",re,[o("div",ue,[d(y,{label:"Outcome",modelValue:p.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>p.value=e),s[1]||(s[1]=e=>{C(a.classCode)})],items:m.value,variant:"solo","bg-color":"#F3F4F6",flat:"",density:"compact"},null,8,["modelValue","items"])]),o("div",de,"Average progress outcome: "+B(r.averageProgress*100)+"%",1)]),d(A(E),{id:"my-chart-id",options:j,data:v.value},null,8,["data"])]),d(G,{vertical:"",class:"mx-4",style:{height:"360px"}}),o("div",me,[o("div",_e,[d(y,{label:"Student ID",modelValue:i.value,"onUpdate:modelValue":[s[2]||(s[2]=e=>i.value=e),s[3]||(s[3]=e=>{w(a.classCode,e),D(a.classCode,e)})],items:(u=g.value)==null?void 0:u.map(e=>e.student_id),variant:"solo",density:"compact",class:"mr-2","bg-color":"#F3F4F6",flat:""},null,8,["modelValue","items"])]),d(A(E),{id:"my-chart-id",options:R,data:n.value},null,8,["data"])])]),o("div",pe,[fe,o("div",be,[o("div",ve,[d(y,{label:"Outcome",modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=e=>f.value=e),items:m.value,variant:"solo","bg-color":"#F3F4F6",flat:"",density:"compact"},null,8,["modelValue","items"])]),o("div",ge,[(x(!0),S(P,null,K(b.value,e=>(x(),Q(t,{exerciseCode:e.exercise_code,exerciseName:e.exercise_name},null,8,["exerciseCode","exerciseName"]))),256))])])])],16)}}}),Ce={class:"d-flex flex-row justify-space-between"},we=o("h1",{class:"w-75"},"Report & Suggestion",-1),xe={class:""},ke=N({__name:"Report",setup(F){const i=_(),p=_(),f=_();async function m(){var b,a,r,v;const{data:g}=await h.get("/api/classes");f.value=g.map(n=>{const[k,C]=n.course.split("-"),w=n.class_code.split("_")[0].substring(2);return{name:C,course_code:k,class_code:n.class_code,group:n.group,semester:w,num_of_lab:n.num_of_lab,num_of_students:n.num_of_students,num_submit_file:n.num_submit_file,num_of_exercises:n.num_of_exercises,num_of_submissions:n.num_of_submissions}}),i.value=((a=(b=f.value)==null?void 0:b.at(0))==null?void 0:a.class_code)??"",p.value=((v=(r=f.value)==null?void 0:r.at(0))==null?void 0:v.num_of_lab)??0}return se(()=>{m()}),(g,b)=>{const a=oe,r=he;return x(),S(P,null,[d(a),d(ae,null,{default:te(()=>{var v;return[o("div",Ce,[we,d(y,{label:"Class",modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=n=>i.value=n),items:(v=f.value)==null?void 0:v.map(n=>n.class_code),variant:"solo",density:"compact",class:"mr-2","bg-color":"#F3F4F6",flat:""},null,8,["modelValue","items"])]),o("div",xe,[d(r,{class:"w-100",title:"Learning Outcome Performance",classCode:i.value,numOfLab:p.value},null,8,["classCode","numOfLab"])])]}),_:1})],64)}}});export{ke as default};
