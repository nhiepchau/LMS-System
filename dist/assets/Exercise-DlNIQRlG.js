import{K as z,b0 as T,a0 as U,b1 as A,b2 as R,b3 as j,b4 as M,a6 as L,a2 as G,aM as H,M as J,aN as K,a7 as O,a8 as Q,b5 as W,b6 as X,b7 as Y,b8 as Z,b9 as ee,aa as ae,N as se,g as e,_ as te,o as k,c as q,w as s,V as oe,z as h,b as i,d as B,a$ as D,ae as le,r as y,aV as ne,m as ie,i as C,j as p,l as E,q as w,e as V,ba as re,x as ce,y as de,A as ue,G as me,t as $,J as pe,E as P,s as fe,F as _e,H as ve}from"./index-C_42H0vA.js";import{V as be}from"./VForm-B-b5_Tfg.js";import{_ as ge}from"./FileInput.vue_vue_type_script_setup_true_lang-02-UQY82.js";import{a as ye,h as I}from"./http-nrUfQssp.js";import{V as S}from"./VDialog-B_r4EC5Q.js";import{V as he}from"./VDataTable-DjueWEC-.js";import"./VTable-ZC2Vq1Lr.js";const xe=z({color:String,...T(),...U(),...A(),...R(),...j(),...M(),...L(),...G(),...H()},"VSheet"),ke=J()({name:"VSheet",props:xe(),setup(t,f){let{slots:r}=f;const{themeClasses:_}=K(t),{backgroundColorClasses:v,backgroundColorStyles:d}=O(Q(t,"color")),{borderClasses:u}=W(t),{dimensionStyles:n}=X(t),{elevationClasses:m}=Y(t),{locationStyles:b}=Z(t),{positionClasses:x}=ee(t),{roundedClasses:c}=ae(t);return se(()=>e(t.tag,{class:["v-sheet",_.value,v.value,u.value,m.value,x.value,c.value,t.class],style:[d.value,n.value,b.value,t.style]},r)),{}}}),Ce={},Ve=i("h3",{class:"text-primary mb-5 text-left"},"Add new question?",-1);function we(t,f){return k(),q(ke,{class:"mx-auto w-50 pa-5 text-right"},{default:s(()=>[Ve,e(be,{"validate-on":"submit lazy"},{default:s(()=>[e(oe,{label:"Question"}),e(h,{class:"mt-2 text-none bg-light-blue",text:"Submit",type:"submit",variant:"elevated"})]),_:1})]),_:1})}const $e=te(Ce,[["render",we]]),Pe={class:"d-flex flex-row text-primary mb-2"},Ie=i("h2",{class:"my-auto"},"Import new file",-1),Se=i("p",{class:"mt-4"},"Please import more question data for the student ",-1),qe={class:"border-sm rounded pa-4 my-4 mx-auto",style:{height:"250px"}},Be={class:"d-flex flex-row text-primary"},De=i("h3",null,"Exercise file",-1),Ee={key:0,class:"mt-15"},Fe={key:1,class:"text-center mt-10"},Ne=B({__name:"ImportCard",props:{classId:{type:Number,required:!0}},emits:["openImportCard"],setup(t,{emit:f}){const r=f,_=t,v=D(),d=le(),u=y(),n=y(!1),m=ne("create-notification"),b="http://127.0.0.1:8000";async function x(){if(u.value){const c=new FormData;c.append("exercise_file",u.value),c.append("class_code",`${_.classId}`),console.log("FormData ",c),n.value=!0,await ye.post(`${b}/api/classes/${v.params.class_code}/exercises/upload`,c,{headers:{Authorization:`Bearer ${d.token}`,"Content-Type":"multipart/form-data"}}).then(function(o){var a;n.value=!1,r("openImportCard",!1),m({type:"success",message:`Uploaded file ${(a=u.value)==null?void 0:a.name} successfully!`})}).catch(function(){n.value=!1,r("openImportCard",!1),m({type:"error",message:"Something's wrong when uploading!"})})}}return(c,o)=>{const a=ge;return k(),q(ue,{class:"w-66 mx-auto text-secondary"},{default:s(()=>[e(ie,null,{default:s(()=>[i("div",Pe,[Ie,e(C,{size:"md",class:"ml-2 my-auto"},{default:s(()=>[p("fas fa-chevron-right")]),_:1}),e(E,{class:"ml-4 my-auto"},{default:s(()=>[p("Exercises")]),_:1})]),e(w),Se,i("div",qe,[i("div",Be,[e(C,{class:"mr-2"},{default:s(()=>[p("fas fa-file-alt")]),_:1}),De]),n.value?(k(),V("div",Fe,[e(re,{size:100,width:7,color:"primary",indeterminate:""})])):(k(),V("div",Ee,[e(a,{idx:0,type:"Exercise",onUploadFile:o[0]||(o[0]=g=>u.value=g)})]))])]),_:1}),e(w,{class:"my-1"}),e(ce,null,{default:s(()=>[e(de),e(h,{text:"Close",class:"text-none bg-blue-lighten-5 text-blue-darken-2",onClick:o[1]||(o[1]=g=>r("openImportCard",!1)),disabled:n.value},null,8,["disabled"]),e(h,{class:"text-none bg-primary",text:"Save",onClick:x,disabled:n.value},null,8,["disabled"])]),_:1})]),_:1})}}}),ze={class:"d-flex flex-row w-100 justify-space-between"},Te={class:"text-primary"},Je=B({__name:"Exercise",setup(t){const f=D(),r=y(!1),_=y(!1),v=y(0),d=f.params.class_code.toString();async function u(){const o=d.substring(6,12),{data:a}=await I.get(`/api/courses/${o}/classes/${d}`);v.value=a.pk}function n(o){window.open(o,"_blank")}const m=y();async function b(){const{data:o}=await I.get(`/api/classes/${d}/exercises`);m.value=o.map(a=>{const g=a.level===1?"1-easy":a.level===2?"2-medium":a.level===3?"3-hard":"";return{question:a.exercise_code,name:a.exercise_name,level:g,topic:a.topic,lab_id:a.lab,outcome_id:a.outcome,bkel_link:a.url}})}me(async()=>{await u(),await b()});function x(o){return o==="3-hard"?"red":o==="2-medium"?"orange":"green"}const c=[{title:"question",align:"start",key:"question",sortable:!1},{title:"name",align:"start",key:"name",sortable:!1},{title:"level",align:"start",key:"level",sortable:!1},{title:"topic",align:"start",key:"topic",sortable:!1},{title:"lab_id",align:"start",key:"lab_id",sortable:!1},{title:"outcome_id",align:"start",key:"outcome_id",sortable:!1},{title:"bkel_link",align:"center",key:"bkel_link",sortable:!1}];return(o,a)=>{const g=ve,F=Ne,N=$e;return k(),V(_e,null,[e(g),e(fe,null,{default:s(()=>[i("div",ze,[i("h1",Te," ["+$(pe(d).substring(6))+"] Exercises ",1),i("div",null,[e(S,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value=l)},{activator:s(({props:l})=>[e(h,P({variant:"outlined"},l,{class:"text-none text-primary mr-3","prepend-icon":"fas fa-file-upload"}),{default:s(()=>[p("Import")]),_:2},1040)]),default:s(()=>[e(F,{classId:v.value,onOpenImportCard:a[0]||(a[0]=l=>{r.value=l,b()})},null,8,["classId"])]),_:1},8,["modelValue"]),e(S,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=l=>_.value=l)},{activator:s(({props:l})=>[e(h,P({variant:"flat",height:"40"},l,{class:"text-none bg-primary text-white","prepend-icon":"fas fa-plus"}),{default:s(()=>[p("New question")]),_:2},1040)]),default:s(()=>[e(N)]),_:1},8,["modelValue"])])]),e(he,{class:"border-sm rounded-lg mt-8",items:m.value,headers:c,"item-value":"name","show-select":""},{"item.level":s(({value:l})=>[e(E,{color:x(l)},{default:s(()=>[p($(l),1)]),_:2},1032,["color"])]),"item.bkel_link":s(({value:l})=>[e(h,{icon:"",variant:"plain",onClick:Ue=>n(l)},{default:s(()=>[e(C,{size:"xsmall",class:"text-dark-grey"},{default:s(()=>[p("fas fa-link")]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})],64)}}});export{Je as default};
