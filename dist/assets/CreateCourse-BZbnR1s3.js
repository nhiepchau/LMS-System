import{u as K,_ as le}from"./FileInput.vue_vue_type_script_setup_true_lang-BKL-s5zo.js";import{b as D,a as A,d as O,c as G,V as ae}from"./VWindowItem-BK4hYOkt.js";import{V as oe}from"./VTable-DqcBnfAS.js";import{d as F,r as S,a as ue,I as P,G as Q,o as v,e as V,g as l,w as i,F as C,f as L,J as I,c as $,j as h,t as N,b as u,V as q,i as w,p as ie,k as ce,_ as me,K as U,L as fe,M as R,N as E,E as M,O as re,P as ve,Q as be,R as pe,S as j,T as _e,U as Ve,W as ye,X as te,Y as ge,Z as Ce,v as W,u as he,q as ke,$ as H,z,a0 as X,a1 as xe,a2 as ne,a3 as Ie,a4 as Se,a5 as $e,a6 as Le,a7 as Ne,a8 as B,a9 as we,aa as Be,ab as De,ac as Oe,ad as Pe,ae as T,s as Fe,H as Ue}from"./index-Di_eUCWP.js";import{h as J}from"./http-nrUfQssp.js";const Y=a=>(ie("data-v-1d4ef8b4"),a=a(),ce(),a),Re={class:"bg-grey"},Ee=Y(()=>u("th",{class:"text-left"},"LO",-1)),Te=Y(()=>u("th",{class:"text-center"},"Total",-1)),Ae=Y(()=>u("th",{class:"text-center"},"Threshold",-1)),Ge={class:"text-center"},ze={class:"text-center"},Me=F({__name:"DistributionForm",props:{classIdx:{type:Number,required:!0},outcomes:{type:Array,default:[]}},setup(a){const o=a;function s(t,e,f){return f.indexOf(t)===e}const c=K(),b=o.outcomes.map(t=>t.parent_outcome).filter(s),m=S(""),_=c.selectedCourse.NumOfLabs,y=Array.from({length:_},(t,e)=>e+1).map(t=>`Lab ${t}`);function p(t,e){return(""+t.subLO).localeCompare(e.subLO)}const n=ue({weight:o.outcomes.map(t=>({subLO:t.outcome_code,labs:Array(_),threshold:t.threshold})).sort(p)}),x=P(()=>{let t=Array();return n.weight.forEach(e=>{let f=0;e.labs.forEach(d=>{f+=d}),t.push(f)}),t});function g(){var t=n.weight.flatMap(e=>e.labs.map((f,d)=>({LabName:y[d],Outcome:e.subLO,Threshold:e.threshold,Contribution:f})));console.log("New labs ",t),c.setLabs(o.classIdx,t)}return Q(()=>{let t=c.getValidClasses()[o.classIdx];if(t.Labs.length>0){var e=t.Labs.map(f=>({subLO:f.Outcome,threshold:f.Threshold,labs:[]}));t.Labs.forEach(f=>{var d;(d=e.find(r=>r.subLO==f.Outcome))==null||d.labs.push(f.Contribution)}),n.weight=e}}),(t,e)=>(v(),V(C,null,[l(A,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=f=>m.value=f)},{default:i(()=>[(v(!0),V(C,null,L(I(b),(f,d)=>(v(),$(D,{key:d,value:f},{default:i(()=>[h(N(f),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(G,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=f=>m.value=f),class:"mt-3"},{default:i(()=>[(v(!0),V(C,null,L(I(b),(f,d)=>(v(),$(O,{key:d,value:f},{default:i(()=>[l(oe,null,{default:i(()=>[u("thead",Re,[u("tr",null,[Ee,(v(!0),V(C,null,L(I(y),(r,k)=>(v(),V("th",{class:"text-center",key:k},N(r),1))),128)),Te,Ae])]),u("tbody",null,[(v(!0),V(C,null,L(n.weight.filter(r=>r.subLO.substring(0,5)==f).sort(p),(r,k)=>(v(),V("tr",{key:k},[u("td",null,N(r.subLO),1),(v(!0),V(C,null,L(I(y),(xa,Z)=>(v(),V("td",{key:Z},[l(q,{placeholder:"%",density:"compact",flat:"",variant:"outlined",class:"my-1 text-sm-body-1",color:"dark-grey","onUpdate:modelValue":de=>{if(r.subLO.substring(0,5)==m.value){var ee=r.labs;ee[Z]=parseInt(de),n.weight[k].labs=ee,g()}}},null,8,["onUpdate:modelValue"])]))),128)),u("td",Ge,[l(w,{size:"small"},{default:i(()=>[h("fas fa-bolt")]),_:1}),h("  "+N(x.value[k])+"% ",1)]),u("td",ze,N(r.threshold),1)]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])],64))}}),We=me(Me,[["__scopeId","data-v-1d4ef8b4"]]),qe={class:"mt-3 w-100"},je=u("h3",null,"Classes",-1),He=u("p",null,"Exercise for each class",-1),Je={class:"d-flex flex-row mt-5"},Ke={class:"d-flex flex-row text-primary"},Qe=u("h3",null,"Submissions file",-1),Xe={class:"mt-15"},Ye=u("div",{class:"mt-3"},[u("h3",null,"Distribution"),u("p",null,"Exercise for each class")],-1),Ze={class:"d-flex flex-row mt-5"},ea=u("h3",{class:"text-primary"},"Learning outcome distribution",-1),aa=u("p",{class:"text-dark-grey text-sm-body-2"},"Loading learning outcome details from your data",-1),ta=F({__name:"SubmissionForm",setup(a){const o=S(""),s=S(""),c=K(),b=c.selectedCourse.CourseCode,m=c.getValidClasses(),_=S();Q(()=>{y()});async function y(){const{data:p}=await J.get(`/api/courses/${b}/outcomes`);_.value=p.map(n=>({pk:n.pk,outcome_code:n.outcome_code,parent_outcome:n.parent_outcome,threshold:n.threshold}))}return(p,n)=>{const x=le,g=We;return v(),V(C,null,[l(A,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t),class:"w-100"},{default:i(()=>[l(D,{class:"text-none",value:"Submissions"},{default:i(()=>[l(w,null,{default:i(()=>[h("fas fa-circle-check")]),_:1}),h("  Submissions")]),_:1}),l(D,{class:"text-none",value:"LODistribution"},{default:i(()=>[h("LO Distribution")]),_:1})]),_:1},8,["modelValue"]),l(G,{class:"mt-3 w-100",modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=t=>o.value=t)},{default:i(()=>[l(O,{value:"Submissions"},{default:i(()=>[u("div",qe,[je,He,u("div",Je,[l(A,{direction:"vertical",modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=t=>s.value=t),class:"w-25"},{default:i(()=>[(v(!0),V(C,null,L(I(m),(t,e)=>(v(),$(D,{key:e,value:t.Name},{default:i(()=>[h(N(t.Name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(G,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=t=>s.value=t),class:"border-sm rounded w-75 pa-4",style:{height:"250px","margin-top":"-70px"}},{default:i(()=>[(v(!0),V(C,null,L(I(m),(t,e)=>(v(),$(O,{key:e,value:t.Name},{default:i(()=>[u("div",Ke,[l(w,{class:"mr-2"},{default:i(()=>[h("fas fa-file-alt")]),_:1}),Qe]),u("div",Xe,[l(x,{idx:e,type:"Submission"},null,8,["idx"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),_:1}),l(O,{value:"LODistribution"},{default:i(()=>[Ye,u("div",Ze,[l(A,{direction:"vertical",modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=t=>s.value=t),class:"w-25"},{default:i(()=>[(v(!0),V(C,null,L(I(m),(t,e)=>(v(),$(D,{key:e,value:t.Name},{default:i(()=>[h(N(t.Name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(G,{modelValue:s.value,"onUpdate:modelValue":n[4]||(n[4]=t=>s.value=t),class:"border-sm rounded w-75 pa-4",style:{height:"400px","margin-top":"-70px"}},{default:i(()=>[(v(!0),V(C,null,L(I(m),(t,e)=>(v(),$(O,{key:e,value:t.Name},{default:i(()=>[ea,aa,l(g,{outcomes:_.value,classIdx:e},null,8,["outcomes","classIdx"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])],64)}}}),sa=U({...fe({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),la=R()({name:"VRadio",props:sa(),setup(a,o){let{slots:s}=o;return E(()=>l(re,M(a,{class:["v-radio",a.class],style:a.style,type:"radio"}),s)),{}}}),oa=U({height:{type:[Number,String],default:"auto"},...ve(),...be(pe(),["multiple"]),trueIcon:{type:j,default:"$radioOn"},falseIcon:{type:j,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),ua=R()({name:"VRadioGroup",inheritAttrs:!1,props:oa(),emits:{"update:modelValue":a=>!0},setup(a,o){let{attrs:s,slots:c}=o;const b=_e(),m=P(()=>a.id||`radio-group-${b}`),_=Ve(a,"modelValue");return E(()=>{const[y,p]=ye(s),n=te.filterProps(a),x=re.filterProps(a),g=c.label?c.label({label:a.label,props:{for:m.value}}):a.label;return l(te,M({class:["v-radio-group",a.class],style:a.style},y,n,{modelValue:_.value,"onUpdate:modelValue":t=>_.value=t,id:m.value}),{...c,default:t=>{let{id:e,messagesId:f,isDisabled:d,isReadonly:r}=t;return l(C,null,[g&&l(ge,{id:e.value},{default:()=>[g]}),l(Ce,M(x,{id:e.value,"aria-describedby":f.value,defaultsTarget:"VRadio",trueIcon:a.trueIcon,falseIcon:a.falseIcon,type:a.type,disabled:d.value,readonly:r.value,"aria-labelledby":g?e.value:void 0,multiple:!1},p,{modelValue:_.value,"onUpdate:modelValue":k=>_.value=k}),c)])}})}),{}}}),ra={class:"d-flex flex-row"},na=u("h3",{class:"my-auto text-primary"},"General Information",-1),da={class:"d-flex flex-row mt-4"},ia=u("h3",{class:"my-auto text-primary"},"Classes",-1),ca=u("thead",null,[u("tr",null,[u("th",null,"Class"),u("th",{class:"w-50"},"Exercises file"),u("th",null,"Default")])],-1),ma={class:"w-50"},fa=F({__name:"CreateCourseForm",setup(a){const o=K(),s=S(""),c=S(""),b=S(),m=S(),_=S(),y=ue({classes:[{Name:"",Default:!1}]});Q(()=>{p(),n();var t=o.getValidClasses();t.length>0&&(y.classes=t),s.value=o.selectedCourse.CourseName,c.value=o.selectedCourse.Semester,b.value=o.selectedCourse.NumOfLabs});async function p(){const{data:t}=await J.get("/api/courses");m.value=t.map(e=>({pk:e.pk,course_code:e.course_code,course_name:e.course_name}))}async function n(){const{data:t}=await J.get("/api/courses/semesters");_.value=t.map(e=>({pk:e.pk,semester_name:e.semester_name}))}function x(){y.classes.push({Name:"",Default:!1,Labs:[]}),o.addClass({Name:"",Default:!1,Labs:[]})}function g(t){var f,d;let e=t??"";o.editCourse("CourseName",e),o.editCourse("CourseCode",((d=(f=m.value)==null?void 0:f.find(r=>r.course_name==e))==null?void 0:d.course_code)??"")}return(t,e)=>{const f=le;return v(),V(C,null,[u("div",ra,[l(w,{class:"my-auto mr-2 text-sub",size:"small"},{default:i(()=>[h("fas fa-info-circle")]),_:1}),na]),l(he,{class:"mt-4"},{default:i(()=>[l(W,{cols:"6"},{default:i(()=>{var d;return[l(ae,{label:"Course Name",items:(d=m.value)==null?void 0:d.map(r=>r.course_name),variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:s.value,"onUpdate:modelValue":[e[0]||(e[0]=r=>s.value=r),e[1]||(e[1]=r=>g(r))]},null,8,["items","modelValue"])]}),_:1}),l(W,{cols:"3"},{default:i(()=>{var d;return[l(ae,{label:"Semester",items:(d=_.value)==null?void 0:d.map(r=>r.semester_name),variant:"outlined",color:"sub","bg-color":"#F3F4F6",density:"comfortable",modelValue:c.value,"onUpdate:modelValue":[e[2]||(e[2]=r=>c.value=r),e[3]||(e[3]=r=>I(o).editCourse("Semester",r??""))]},null,8,["items","modelValue"])]}),_:1}),l(W,{cols:"3"},{default:i(()=>[l(q,{"bg-color":"#F3F4F6",label:"No. of Lab",color:"sub",placeholder:"Enter number of labs",variant:"outlined",density:"comfortable",modelValue:b.value,"onUpdate:modelValue":[e[4]||(e[4]=d=>b.value=d),e[5]||(e[5]=d=>I(o).editCourse("NumOfLabs",parseInt(d)))]},null,8,["modelValue"])]),_:1})]),_:1}),l(ke,{class:"my-2"}),u("div",da,[l(w,{class:"my-auto mr-2 text-sub",size:"small"},{default:i(()=>[h("far fa-calendar")]),_:1}),ia]),l(oe,null,{default:i(()=>[ca,u("tbody",null,[(v(!0),V(C,null,L(y.classes,(d,r)=>(v(),V("tr",{key:r},[u("td",null,[l(q,{rounded:"md","bg-color":"#F3F4F6",color:"sub",variant:"outlined",placeholder:"Class",class:"my-2",density:"compact",modelValue:d.Name,"onUpdate:modelValue":[k=>d.Name=k,k=>I(o).setClassName(r,d.Name)]},null,8,["modelValue","onUpdate:modelValue"])]),u("td",ma,[l(f,{idx:r,type:"Exercise"},null,8,["idx"])]),u("td",null,[l(ua,{color:"#4B7BEC",modelValue:d.Default,"onUpdate:modelValue":[k=>d.Default=k,k=>I(o).setClassDefault(r,d.Default)]},{default:i(()=>[l(la,{class:"text-blue-darken-4",label:"Apply for other classes"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1}),l(z,{onClick:e[6]||(e[6]=H(d=>x(),["prevent"])),variant:"plain",class:"text-none text-primary","prepend-icon":"fas fa-plus"},{default:i(()=>[h("Add more class")]),_:1})],64)}}}),va=U({divider:[Number,String],...X()},"VBreadcrumbsDivider"),ba=R()({name:"VBreadcrumbsDivider",props:va(),setup(a,o){let{slots:s}=o;return E(()=>{var c;return l("li",{class:["v-breadcrumbs-divider",a.class],style:a.style},[((c=s==null?void 0:s.default)==null?void 0:c.call(s))??a.divider])}),{}}}),pa=U({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...X(),...xe(),...ne({tag:"li"})},"VBreadcrumbsItem"),_a=R()({name:"VBreadcrumbsItem",props:pa(),setup(a,o){let{slots:s,attrs:c}=o;const b=Ie(a,c),m=P(()=>{var n;return a.active||((n=b.isActive)==null?void 0:n.value)}),_=P(()=>m.value?a.activeColor:a.color),{textColorClasses:y,textColorStyles:p}=Se(_);return E(()=>l(a.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":m.value,"v-breadcrumbs-item--disabled":a.disabled,[`${a.activeClass}`]:m.value&&a.activeClass},y.value,a.class],style:[p.value,a.style],"aria-current":m.value?"page":void 0},{default:()=>{var n,x;return[b.isLink.value?l("a",{class:"v-breadcrumbs-item--link",href:b.href.value,"aria-current":m.value?"page":void 0,onClick:b.navigate},[((x=s.default)==null?void 0:x.call(s))??a.title]):((n=s.default)==null?void 0:n.call(s))??a.title]}})),{}}}),Va=U({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:j,items:{type:Array,default:()=>[]},...X(),...$e(),...Le(),...ne({tag:"ul"})},"VBreadcrumbs"),ya=R()({name:"VBreadcrumbs",props:Va(),setup(a,o){let{slots:s}=o;const{backgroundColorClasses:c,backgroundColorStyles:b}=Ne(B(a,"bgColor")),{densityClasses:m}=we(a),{roundedClasses:_}=Be(a);De({VBreadcrumbsDivider:{divider:B(a,"divider")},VBreadcrumbsItem:{activeClass:B(a,"activeClass"),activeColor:B(a,"activeColor"),color:B(a,"color"),disabled:B(a,"disabled")}});const y=P(()=>a.items.map(p=>typeof p=="string"?{item:{title:p},raw:p}:{item:p,raw:p}));return E(()=>{const p=!!(s.prepend||a.icon);return l(a.tag,{class:["v-breadcrumbs",c.value,m.value,_.value,a.class],style:[b.value,a.style]},{default:()=>{var n;return[p&&l("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[s.prepend?l(Oe,{key:"prepend-defaults",disabled:!a.icon,defaults:{VIcon:{icon:a.icon,start:!0}}},s.prepend):l(w,{key:"prepend-icon",start:!0,icon:a.icon},null)]),y.value.map((x,g,t)=>{var d;let{item:e,raw:f}=x;return l(C,null,[((d=s.item)==null?void 0:d.call(s,{item:e,index:g}))??l(_a,M({key:g,disabled:g>=t.length-1},typeof e=="string"?{title:e}:e),{default:s.title?()=>{var r;return(r=s.title)==null?void 0:r.call(s,{item:e,index:g})}:void 0}),g<t.length-1&&l(ba,null,{default:s.divider?()=>{var r;return(r=s.divider)==null?void 0:r.call(s,{item:f,index:g})}:void 0})])}),(n=s.default)==null?void 0:n.call(s)]}})}),{}}}),ga=F({__name:"BreadCrumb",props:{activeIdx:{type:Number,default:0}},setup(a){const o=a,s=S([{title:"Classes & Exercises",icon:"fas fa-book",color:"#6F9CEB",disabled:!1},{title:"Submissions",icon:"fas fa-file-code",color:"",disabled:!0}]);return Pe(()=>o.activeIdx,(c,b)=>{s.value.forEach(m=>{s.value[b].color="",s.value[b].disabled=!0,s.value[c].color="#6F9CEB",s.value[c].disabled=!1})}),(c,b)=>(v(),$(ya,{items:s.value,rounded:"",class:"bg-grey py-6 border-sm"},{divider:i(()=>[l(w,{size:"xsmall"},{default:i(()=>[h("fas fa-chevron-right")]),_:1})]),title:i(({item:m})=>[l(w,{size:"small"},{default:i(()=>[h(N(m.icon),1)]),_:2},1024),h("  "+N(m.title),1)]),_:1},8,["items"]))}}),Ca=u("h1",null,"Create classes",-1),ha={class:"border-sm px-3 py-5 rounded mt-4"},ka={class:"mt-2 text-right"},se=2,wa=F({__name:"CreateCourse",setup(a){const o=S(0);return(s,c)=>{const b=Ue,m=ga,_=fa,y=ta;return v(),V(C,null,[l(b),l(Fe,null,{default:i(()=>[Ca,l(m,{activeIdx:o.value,class:"my-2"},null,8,["activeIdx"]),u("div",ha,[o.value===0?(v(),$(_,{key:0})):T("",!0),o.value===1?(v(),$(y,{key:1})):T("",!0)]),u("div",ka,[l(z,{disabled:o.value<=0,variant:"plain",text:"Back","prepend-icon":"fas fa-arrow-left",class:"text-none bg-light-blue text-sub mr-3",onClick:c[0]||(c[0]=H(p=>o.value--,["prevent"]))},null,8,["disabled"]),o.value+1<se?(v(),$(z,{key:0,variant:"plain","append-icon":"fas fa-arrow-right",class:"text-none bg-primary",text:"Next",onClick:c[1]||(c[1]=H(p=>o.value++,["prevent"]))})):T("",!0),o.value+1>=se?(v(),$(z,{key:1,variant:"plain","append-icon":"fas fa-arrow-right",class:"text-none bg-primary",text:"Finish"})):T("",!0)])]),_:1})],64)}}});export{wa as default};
